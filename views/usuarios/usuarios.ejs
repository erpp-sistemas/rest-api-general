<!DOCTYPE html>
<html lang="en">
<head>
    <%- include('../templates/head', { title: 'Usuarios' }) %>
</head>
<body>
    <%- include('../templates/header') %>
    <%- include('../templates/sidebar_principal') %>
    <section class="home-section" style="top: 3rem;">
        <%- include('../templates/navbar', { home_content_name: 'Usuarios' }) %>
        <div class="container mt-3 mb-3">
            <div class="table-responsive">
                <table class="table table-sm table-striped table-hover align-middle">
                    <div class="text-end" style="padding: 1rem 0">
                        <a
                            href="#"
                            class="btn button-principal btn-sm <%= permisos_acciones['crear'] ?? 'd-none' %>"
                            role="button"
                            data-bs-toggle="modal"
                            data-bs-target="#modal-usuario"
                        >
                            <svg
                                xmlns="http://www.w3.org/2000/svg"
                                width="22"
                                height="22"
                                viewBox="0 0 24 24"
                            >
                                <path fill="white" d="M11 19v-6H5v-2h6V5h2v6h6v2h-6v6h-2Z" />
                            </svg>
                            Nuevo usuario
                        </a>
                    </div>

                    <thead class="table-light">
                        <tr>
                            <th scope="col">Usuario</th>
                            <th scope="col">Nombre</th>
                            <th scope="col">Cargo</th>
                            <th scope="col">E-mail</th>
                            <th scope="col">Dirección</th>
                            <th scope="col">Grupo usuario</th>
                            <th scope="col">Acciones</th>
                        </tr>
                    </thead>

                    <tbody class="table-group-divider tbody-usuarios"></tbody>
                </table>
            </div>

            <nav class="pb-1" aria-label="Page navigation">
                <ul class="pagination pagination-sm justify-content-end"></ul>
            </nav>
        </div>
    </section>

    <!-- Modal user -->
    <div
        class="modal modal-form fade"
        id="modal-usuario"
        tabindex="-1"
        aria-labelledby="modal-usuario-label"
        aria-hidden="true"
    >
        <div class="modal-dialog" style="min-width: 630px;">
            <form>
                <div class="modal-content">
                    <div class="modal-header bg-blue-sys text-white" style="border-bottom: none !important;">
                        <svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" viewBox="0 0 256 256">
                            <path
                                fill="white"
                                d="M234.38 210a123.36 123.36 0 0 0-60.78-53.23a76 76 0 1 0-91.2 0A123.36 123.36 0 0 0 21.62
                                210a12 12 0 1 0 20.77 12c18.12-31.32 50.12-50 85.61-50s67.49 18.69 85.61 50a12 12 0 0 0
                                20.77-12ZM76 96a52 52 0 1 1 52 52a52.06 52.06 0 0 1-52-52Z"
                            />
                        </svg>
                        <h5 class="modal-title ms-2" id="modal-usuario-label"></h5>
                        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body bg-blue-sys">
                        <input id="input-usuario-id" type="hidden">
                        <div class="row">
                            <div class="col-6">
                                <div id="input-grupo-usuario" class="input-group mb-4">
                                    <span class="input-group-text" id="grupo-usuario-nombre">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 26 26">
                                            <path
                                                fill="#254061"
                                                d="M16.563 15.9c-.159-.052-1.164-.505-.536-2.414h-.009c1.637-1.686
                                                2.888-4.399 2.888-7.07c0-4.107-2.731-6.26-5.905-6.26c-3.176 0-5.892 2.152-5.892 6.26c0
                                                2.682 1.244 5.406 2.891 7.088c.642 1.684-.506 2.309-.746 2.397c-3.324 1.202-7.224 3.393-7.224
                                                5.556v.811c0 2.947 5.714 3.617 11.002 3.617c5.296 0 10.938-.67
                                                10.938-3.617v-.811c0-2.228-3.919-4.402-7.407-5.557z"
                                            /></svg>
                                    </span>
                                    <input
                                        type="text"
                                        class="form-control input-validar"
                                        name="usuario_nombre"
                                        placeholder="Nombre(s)"
                                        aria-label="grupo-usuario-nombre"
                                        aria-describedby="grupo-usuario-nombre"
                                    >
                                    <div class="invalid-feedback"></div>
                                </div>
                            </div>
                            <div class="col-6">
                                <div id="input-grupo-usuario" class="input-group mb-4">
                                    <span class="input-group-text" id="grupo-usuario-nombre">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 26 26">
                                            <path
                                                fill="#254061"
                                                d="M16.563 15.9c-.159-.052-1.164-.505-.536-2.414h-.009c1.637-1.686 2.888-4.399
                                                2.888-7.07c0-4.107-2.731-6.26-5.905-6.26c-3.176 0-5.892 2.152-5.892 6.26c0 2.682
                                                1.244 5.406 2.891 7.088c.642 1.684-.506 2.309-.746 2.397c-3.324 1.202-7.224
                                                3.393-7.224 5.556v.811c0 2.947 5.714 3.617 11.002 3.617c5.296 0 10.938-.67
                                                10.938-3.617v-.811c0-2.228-3.919-4.402-7.407-5.557z"
                                            /></svg>
                                    </span>
                                    <input
                                        type="text"
                                        class="form-control input-validar"
                                        name="usuario_apellidos"
                                        placeholder="Apellidos"
                                        aria-label="grupo-usuario-nombre"
                                        aria-describedby="grupo-usuario-nombre"
                                    >
                                    <div class="invalid-feedback"></div>
                                </div>
                            </div>
                            <div class="col-12">
                                <div id="input-grupo-usuario" class="input-group mb-4">
                                    <span class="input-group-text" id="grupo-usuario-nombre">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24">
                                            <path
                                                fill="#254061"
                                                d="M12 6.5A2.5 2.5 0 0 1 14.5 9a2.5 2.5 0 0 1-2.5 2.5A2.5 2.5 0 0 1 9.5 9A2.5 2.5 0 0 1
                                                12 6.5M12 2a7 7 0 0 1 7 7c0 5.25-7 13-7 13S5 14.25 5 9a7 7 0 0 1 7-7m0 2a5 5 0 0 0-5 5c0 1
                                                0 3 5 9.71C17 12 17 10 17 9a5 5 0 0 0-5-5Z"
                                            /></svg>
                                    </span>
                                    <input
                                        type="text"
                                        class="form-control input-validar"
                                        name="usuario_direccion"
                                        placeholder="Dirección (Opcional)"
                                        aria-label="grupo-usuario-nombre"
                                        aria-describedby="grupo-usuario-nombre"
                                    >
                                    <div class="invalid-feedback"></div>
                                </div>
                            </div>
                            <div class="col-6">
                                <div id="input-grupo-usuario" class="input-group mb-4">
                                    <span class="input-group-text" id="grupo-usuario-nombre">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 256 256">
                                            <path
                                                fill="#254061"
                                                d="M234.38 210a123.36 123.36 0 0 0-60.78-53.23a76 76 0 1 0-91.2 0A123.36 123.36 0
                                                0 0 21.62 210a12 12 0 1 0 20.77 12c18.12-31.32 50.12-50 85.61-50s67.49 18.69 85.61
                                                50a12 12 0 0 0 20.77-12ZM76 96a52 52 0 1 1 52 52a52.06 52.06 0 0 1-52-52Z"
                                            /></svg>
                                    </span>
                                    <input
                                        type="text"
                                        class="form-control input-validar"
                                        name="usuario_nombre_usuario"
                                        placeholder="Usuario"
                                        aria-label="grupo-usuario-nombre"
                                        aria-describedby="grupo-usuario-nombre"
                                    >
                                    <div class="invalid-feedback"></div>
                                </div>
                            </div>
                            <div class="col-6">
                                <div id="input-grupo-usuario" class="input-group mb-4">
                                    <span class="input-group-text" id="grupo-usuario-nombre">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 20 20">
                                            <path
                                                fill="#254061"
                                                d="M14.608 12.172c0 .84.239 1.175.864 1.175c1.393 0 2.28-1.775 2.28-4.727c0-4.512-3.288-6.672-7.393-6.672c-4.223
                                                0-8.064 2.832-8.064 8.184c0 5.112 3.36 7.896 8.52 7.896c1.752 0 2.928-.192 4.727-.792l.386
                                                1.607c-1.776.577-3.674.744-5.137.744c-6.768 0-10.393-3.72-10.393-9.456c0-5.784 4.201-9.72
                                                9.985-9.72c6.024 0 9.215 3.6 9.215 8.016c0 3.744-1.175 6.6-4.871 6.6c-1.681 0-2.784-.672-2.928-2.161c-.432
                                                1.656-1.584 2.161-3.145 2.161c-2.088 0-3.84-1.609-3.84-4.848c0-3.264 1.537-5.28 4.297-5.28c1.464 0 2.376.576
                                                2.782 1.488l.697-1.272h2.016v7.057h.002zm-2.951-3.168c0-1.319-.985-1.872-1.801-1.872c-.888 0-1.871.719-1.871
                                                2.832c0 1.68.744 2.616 1.871 2.616c.792 0 1.801-.504 1.801-1.896v-1.68z"
                                            />
                                        </svg>
                                    </span>
                                    <input
                                        type="email"
                                        class="form-control input-validar"
                                        name="usuario_email"
                                        placeholder="E-mail (Opcional)"
                                        aria-label="grupo-usuario-nombre"
                                        aria-describedby="grupo-usuario-nombre"
                                    >
                                    <div class="invalid-feedback"></div>
                                </div>
                            </div>
                            <div class="col-6">
                                <div id="input-grupo-usuario" class="input-group mb-4">
                                    <span class="input-group-text" id="grupo-usuario-nombre">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 16 16">
                                            <path
                                                fill="#254061"
                                                fill-rule="evenodd"
                                                d="M6 1a1.75 1.75 0 0 0-1.75 1.75V4H3a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V6a2 2
                                                0 0 0-2-2h-1.25V2.75A1.75 1.75 0 0 0 10 1H6Zm4.25 3V2.75A.25.25 0 0 0 10 2.5H6a.25.25 0 0
                                                0-.25.25V4h4.5ZM3 5.5h10a.5.5 0 0 1 .5.5v1h-11V6a.5.5 0 0 1 .5-.5Zm-.5 3V13a.5.5 0 0 0
                                                .5.5h10a.5.5 0 0 0 .5-.5V8.5H9V10H7V8.5H2.5Z"
                                                clip-rule="evenodd"
                                            />
                                        </svg>
                                    </span>
                                    <input
                                        type="text"
                                        class="form-control input-validar"
                                        name="usuario_cargo"
                                        placeholder="Cargo (Opcional)"
                                        aria-label="grupo-usuario-nombre"
                                        aria-describedby="grupo-usuario-nombre"
                                    >
                                    <div class="invalid-feedback"></div>
                                </div>
                            </div>
                            <div class="col-6">
                                <div class="input-group mb-4">
                                    <div class="btn btn-light btn-outline-light" style="cursor: initial; border-right: 1px solid #e0e0e0;">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 256 256">
                                            <path
                                                fill="#254061"
                                                d="M164.38 181.1a52 52 0 1 0-72.76 0a75.89 75.89 0 0 0-30 28.89a12 12 0 0 0 20.78 12a53
                                                53 0 0 1 91.22 0a12 12 0 1 0 20.78-12a75.89 75.89 0 0 0-30.02-28.89ZM100 144a28 28 0 1 1
                                                28 28a28 28 0 0 1-28-28Zm147.21 9.59a12 12 0 0 1-16.81-2.39c-8.33-11.09-19.85-19.59-29.33-21.64a12
                                                12 0 0 1-1.82-22.91a20 20 0 1 0-24.78-28.3a12 12 0 1 1-21-11.6a44 44 0 1 1 73.28 48.35a92.18 92.18
                                                0 0 1 22.85 21.69a12 12 0 0 1-2.39 16.8Zm-192.28-24c-9.48 2.05-21 10.55-29.33 21.65a12 12 0 0 1-19.19-14.45a92.37
                                                92.37 0 0 1 22.85-21.69a44 44 0 1 1 73.28-48.35a12 12 0 1 1-21 11.6a20 20 0 1 0-24.78 28.3a12 12 0 0 1-1.82 22.91Z"
                                            />
                                        </svg>
                                    </div>
                                    <select class="form-select cr-pointer input-validar" name="grupo_usuario_id">
                                        <option value="" selected disabled>Grupo usuario</option>
                                        <% cat_grupos_usuario.forEach(grupo_usuario => { %>
                                            <option value="<%= grupo_usuario.grupo_usuario_id %>"><%= grupo_usuario.grupo_usuario_nombre %></option>
                                        <% }) %>
                                    </select>
                                    <div class="invalid-feedback"></div>
                                </div>
                            </div>
                            <div class="col-6">
                                <div id="input-grupo-usuario" class="input-group">
                                    <span class="input-group-text" id="grupo-usuario-nombre">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 256 256">
                                            <path
                                                fill="#254061"
                                                d="M160 12a84.05 84.05 0 0 0-80.62 107.65l-55.87 55.86A12 12 0 0 0
                                                20 184v40a12 12 0 0 0 12 12h40a12 12 0 0 0 12-12v-12h12a12 12 0 0 0 12-12v-12h12a12
                                                12 0 0 0 8.49-3.51l7.86-7.87A84 84 0 1 0 160 12Zm0 144a59.58 59.58 0 0 1-22.1-4.2a12 12
                                                0 0 0-13.22 2.55L115 164H96a12 12 0 0 0-12 12v12H72a12 12 0 0 0-12 12v12H44v-23l57.65-57.65a12
                                                12 0 0 0 2.55-13.21A60 60 0 1 1 160 156Zm36-80a16 16 0 1 1-16-16a16 16 0 0 1 16 16Z"
                                            />
                                        </svg>    
                                    </span>
                                    <input
                                        type="password"
                                        autocomplete="off"
                                        class="form-control input-validar input-password"
                                        name="usuario_password"
                                        placeholder="Contraseña"
                                        aria-label="grupo-usuario-nombre"
                                        aria-describedby="grupo-usuario-nombre"
                                    >
                                    <div class="invalid-feedback"></div>
                                </div>
                            </div>
                            <div class="col-6">
                                <div id="input-grupo-usuario" class="input-group">
                                    <span class="input-group-text" id="grupo-usuario-nombre">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 256 256">
                                            <path
                                                fill="#254061"
                                                d="M160 12a84.05 84.05 0 0 0-80.62 107.65l-55.87 55.86A12 12 0 0 0 20 184v40a12 12
                                                0 0 0 12 12h40a12 12 0 0 0 12-12v-12h12a12 12 0 0 0 12-12v-12h12a12 12 0 0 0 8.49-3.51l7.86-7.87A84 84
                                                0 1 0 160 12Zm0 144a59.58 59.58 0 0 1-22.1-4.2a12 12 0 0 0-13.22 2.55L115 164H96a12 12 0 0 0-12 12v12H72a12
                                                12 0 0 0-12 12v12H44v-23l57.65-57.65a12 12 0 0 0 2.55-13.21A60 60 0 1 1 160 156Zm36-80a16 16 0 1 1-16-16a16
                                                16 0 0 1 16 16Z"
                                            />
                                        </svg>    
                                    </span>
                                    <input
                                        type="password"
                                        class="form-control input-validar input-password-validate"
                                        name="validate_password"
                                        placeholder="Validación contraseña"
                                        aria-label="grupo-usuario-nombre"
                                        aria-describedby="grupo-usuario-nombre"
                                    >
                                    <div class="invalid-feedback"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="modal-footer bg-blue-sys" style="padding: 0.5rem 1rem; border-top: none !important;">
                        <a href="#" role="button" class="btn button-principal btn-sm" id="btn-guardar-usuario">
                            <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24">
                                <path
                                    fill="white"
                                    d="M5 21h14a2 2 0 0 0 2-2V8a1 1 0 0 0-.29-.71l-4-4A1 1 0 0 0 16 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2zm10-2H9v-5h6zM13
                                    7h-2V5h2zM5 5h2v4h8V5h.59L19 8.41V19h-2v-5a2 2 0 0 0-2-2H9a2 2 0 0 0-2 2v5H5z"
                                />
                            </svg>
                            Guardar cambios
                        </a>
                    </div>
                </div>
            </form>
        </div>
    </div>

    <%- include('../templates/fotter') %>
    <%- include('../templates/fotter_2') %>
    <script src="<%= base_url %>js/usuario.js" type="module"></script>
</body>
</html>